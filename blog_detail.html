<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Blog | シモジマン</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries,typography"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#258cf4",
                        "background-light": "#ffffff",
                        "background-dark": "#0f172a",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "Noto Sans JP", "sans-serif"]
                    },
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Plus Jakarta Sans', 'Noto Sans JP', sans-serif;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        .prose {
            color: #1a1a1a;
            max-width: none;
        }

        .prose h2 {
            font-size: 1.875rem;
            font-weight: 800;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #258cf4;
            color: #0f172a;
        }

        .prose h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #0f172a;
        }

        .prose p {
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .prose ul,
        .prose ol {
            margin-bottom: 2rem;
            padding-left: 1.5rem;
        }

        .prose li {
            margin-bottom: 0.5rem;
        }

        .prose img {
            border-radius: 1.5rem;
            margin: 3rem 0;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        .prose strong {
            color: #0f172a;
            font-weight: 800;
            background: linear-gradient(transparent 70%, rgba(37, 140, 244, 0.1) 70%);
        }

        .prose blockquote {
            border-left-color: #258cf4;
            font-style: italic;
            background: #f8fafc;
            padding: 1.5rem 2rem;
            border-radius: 0 1rem 1rem 0;
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark text-[#181411]">
    <!-- Simple Header -->
    <header class="sticky top-0 z-50 glass-effect border-b border-primary/10">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <a href="index.html" class="flex items-center gap-2 font-extrabold tracking-tighter">
                <span class="material-symbols-outlined text-primary">arrow_back</span>
                HOME
            </a>
            <span class="text-lg font-extrabold tracking-tighter font-display">SHIMOJIMAN BLOG</span>
        </div>
    </header>

    <main class="py-12 lg:py-24">
        <article class="max-w-4xl mx-auto px-4">
            <div id="loading-spinner" class="text-center py-20">
                <div class="animate-spin inline-block size-12 border-[3px] border-current border-t-transparent text-primary rounded-full"
                    role="status"></div>
                <p class="mt-4 text-gray-500 font-bold">記事を読み込んでいます...</p>
            </div>

            <div id="blog-content" class="hidden">
                <header class="mb-12">
                    <div id="blog-eyecatch" class="mb-8 rounded-2xl overflow-hidden shadow-2xl"></div>
                    <time id="blog-date" class="text-primary font-bold block mb-4"></time>
                    <h1 id="blog-title" class="text-4xl lg:text-5xl font-black leading-tight"></h1>
                </header>

                <div id="blog-body" class="prose prose-lg max-w-none text-[#181411]/80 leading-relaxed">
                    <!-- Content will be injected here -->
                </div>
            </div>
        </article>
    </main>

    <script>
        const MICROCMS_DOMAIN = "c1hyze94lo";
        const MICROCMS_API_KEY = "lsav21va5wjfZhLC7mU5u8kG4ARJ6V5BPFSS";

        async function fetchDetail() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            if (!id) {
                window.location.href = 'index.html';
                return;
            }

            try {
                const response = await fetch(`https://${MICROCMS_DOMAIN}.microcms.io/api/v1/blogs/${id}`, {
                    headers: { "X-MICROCMS-API-KEY": MICROCMS_API_KEY }
                });
                const post = await response.json();

                document.title = `${post.title} | シモジマン`;
                document.getElementById('blog-title').textContent = post.title;
                document.getElementById('blog-date').textContent = new Date(post.publishedAt || post.createdAt).toLocaleDateString("ja-JP");
                document.getElementById('blog-body').innerHTML = post.content;

                if (post.eyecatch) {
                    document.getElementById('blog-eyecatch').innerHTML = `<img src="${post.eyecatch.url}" class="w-full h-auto">`;
                }

                document.getElementById('loading-spinner').classList.add('hidden');
                document.getElementById('blog-content').classList.remove('hidden');
            } catch (error) {
                console.error("Error:", error);
                document.getElementById('loading-spinner').innerHTML = '<p class="text-red-500 font-bold">記事の取得に失敗しました。</p>';
            }
        }
        window.onload = fetchDetail;
    </script>
</body>

</html>